<!-- ============ NAVIGATION OHNE SUBNAVIGATION ============ -->
<!-- 
  Diese Komponente dient als zentrale Navigation für alle Seiten der Website.
  Im Gegensatz zur navigation.html fehlt hier die Subnavigation für die Tracks.
  
  Um diese Komponente zu verwenden, gibt es zwei Möglichkeiten:
  
  1. Bei HTML-Dateien mit PHP-Unterstützung:
     <?php include('components/includes/navigation_ohnesub.html'); ?>
  
  2. Bei reinen HTML-Dateien mit JavaScript:
     <div id="navigation-container"></div>
     <script>
       fetch('components/includes/navigation_ohnesub.html')
         .then(response => response.text())
         .then(data => {
           document.getElementById('navigation-container').innerHTML = data;
         });
     </script>
  
  Änderungen an dieser Datei werden automatisch auf allen Seiten übernommen,
  die diese Komponente einbinden.
-->

<div class="nav-wrapper">
  <nav class="main-nav">
    <div class="nav-container">
      <a href="startseite.html" class="nav-logo" data-base-href="startseite.html">
        <img src="assets/pictures/imt_logo.png" alt="StGallen Integrated imt Business School">
        <span class="made-in-text">Made in Switzerland</span>
        <div class="swiss-flag-mini"></div>
      </a>
      
      <div class="nav-menu">
        <a href="startseite.html" class="nav-link" data-base-href="startseite.html">St.Gallen imt</a>
        <div class="nav-item">
          <a href="#" class="nav-link toggle-subnav">Programme<svg width="10" height="6" viewBox="0 0 10 6" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M1 1L5 5L9 1" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg></a>
          <div class="program-dropdown">
            <!-- Erste Spalte: Einzelseminare -->
            <div class="menu-column">
              <h3>Managementseminare</h3>
              <a href="integrated_management_strategy.html" class="program-option" id="integrated-management-option" data-base-href="integrated_management_strategy.html" data-parent-folder="managementseminare">Integrated Management and Strategy</a>
              <a href="financial_management.html" class="program-option" id="financial-management-option" data-base-href="financial_management.html" data-parent-folder="managementseminare">Financial Management</a>
              <a href="inspirational_leadership.html" class="program-option" id="inspirational-leadership-option" data-base-href="inspirational_leadership.html" data-parent-folder="managementseminare">Inspirational Leadership</a>
              <a href="marketing_sales_brand_communication.html" class="program-option" id="marketing-sales-option" data-base-href="marketing_sales_brand_communication.html" data-parent-folder="managementseminare">Marketing, Sales and Brand Communication</a>
              <a href="intelligent_process_automation.html" class="program-option" id="process-automation-option" data-base-href="intelligent_process_automation.html" data-parent-folder="managementseminare">Intelligent Process Automation</a>
              <a href="ki_business_strategy_digital_transformation.html" class="program-option" id="ki-business-strategy-option" data-base-href="ki_business_strategy_digital_transformation.html" data-parent-folder="managementseminare">KI in Business Strategy & Digital Transformation</a>
              <a href="ki_augmented_decision_making.html" class="program-option" id="ki-decision-making-option" data-base-href="ki_augmented_decision_making.html" data-parent-folder="managementseminare">KI-Augmented Decision Making</a>
            </div>
            
            <!-- Zweite Spalte: Programme -->
            <div class="menu-column">
              <h3>Programme</h3>
              <a href="management_programm.html" class="program-option" data-base-href="management_programm.html">StGallen imt Management Programm</a>
              <a href="management_programm_cas.html" class="program-option" data-base-href="management_programm_cas.html">StGallen imt Certified Management CAS</a>
              <a href="fast_track_mba.html" class="program-option" data-base-href="fast_track_mba.html">StGallen Fast‑Track MBA Programm</a>
            </div>
          </div>
        </div>
        <a href="netzwerk.html" class="nav-link" data-base-href="netzwerk.html">Netzwerk</a>
        <a href="research.html" class="nav-link" data-base-href="research.html">Research</a>
        <a href="support.html" class="nav-link" data-base-href="support.html">Support</a>
        <a href="kontakt.html" class="nav-link" data-base-href="kontakt.html">Kontakt</a>
      </div>
      
      <div class="lang-select">
        <a href="#" class="nav-link">DE <svg width="10" height="6" viewBox="0 0 10 6" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M1 1L5 5L9 1" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg></a>
        <div class="program-dropdown lang-dropdown">
          <a href="?lang=de" class="program-option active">Deutsch</a>
          <a href="?lang=en" class="program-option">English</a>
        </div>
      </div>
      
      <button class="mobile-menu-btn" id="mobileMenuButton">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <line x1="3" y1="9" x2="21" y2="9"></line>
          <line x1="3" y1="15" x2="21" y2="15"></line>
        </svg>
      </button>
    </div>
  </nav>
</div>

<style>
  :root {
    --font-sans: -apple-system,BlinkMacSystemFont,"San Francisco","Segoe UI",Roboto,Oxygen,Ubuntu,Cantarell,"Open Sans","Helvetica Neue",sans-serif;
    --color-text: #1d1d1f;
    --color-muted: #6e6e73;
    --color-card-bg: #f5f5f7;
    --color-accent2: #970289;
    --color-badge: #e2b245;
    --color-badge-hover: #d4a535;
    --spacing: 24px;
    --radius: 16px;
    --max-width: 1200px;
    --imt-purple: #6e45e2;
    --swiss-red: #ff0000;
  }

  /* Navigation Wrapper und Container */
  .nav-wrapper {
    position: fixed;
    left: 0;
    right: 0;
    top: 0;
    background: rgba(255, 255, 255, 0.98);
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);
    z-index: 1000;
    border-bottom: 1px solid rgba(0, 0, 0, 0.06);
    font-family: var(--font-sans);
    color: var(--color-text);
  }

  .nav-container {
    max-width: var(--max-width);
    width: 90%;
    margin: 0 auto;
    display: flex;
    align-items: center;
    justify-content: space-between;
    height: 64px;
    padding: 0;
    position: relative;
  }

  /* Main Navigation */
  .main-nav {
    background: #fff;
    border-bottom: 1px solid rgba(0,0,0,0.1);
    width: 100%;
  }

  .nav-logo {
    display: flex;
    align-items: center;
    margin-right: auto;
    height: 32px;
  }

  .nav-logo img {
    height: 100%;
    width: auto;
  }

  .nav-menu {
    display: flex;
    align-items: center;
    gap: 32px;
    margin-right: 0;
  }

  .nav-link {
    color: var(--color-text);
    text-decoration: none;
    font-size: 0.95rem;
    font-weight: 500;
    white-space: nowrap;
    position: relative;
    padding: 8px 0;
    transition: color 0.2s;
    display: flex;
    align-items: center;
    gap: 4px;
  }

  .nav-link svg {
    margin-left: 2px;
    transition: transform 0.2s ease;
  }

  .nav-link:hover {
    color: var(--color-accent2);
    text-decoration: none !important;
  }

  .nav-link.active {
    color: var(--color-accent2);
    text-decoration: none !important;
  }

  /* Verhindert die Unterstreichung bei allen Navigationslinks */
  .nav-menu a:hover {
    text-decoration: none !important;
  }

  .nav-link.active::after {
    content: '';
    position: absolute;
    bottom: 0;
    left: 0;
    width: 100%;
    height: 2px;
    background: var(--color-accent2);
    border-radius: 1px;
  }

  .nav-item:hover .nav-link svg, 
  .lang-select:hover .nav-link svg {
    transform: rotate(180deg);
  }

  /* Dropdown */
  .nav-item {
    position: relative;
  }

  .program-dropdown {
    position: absolute;
    top: 100%;
    left: 50%;
    transform: translateX(-50%) translateY(-8px);
    background: white;
    border-radius: 12px;
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
    padding: 24px;
    opacity: 0;
    visibility: hidden;
    transition: all 0.2s ease;
    min-width: 850px;
    margin-top: 8px;
    z-index: 1000;
    display: flex;
    gap: 24px;
  }

  .nav-item:hover .program-dropdown,
  .lang-select:hover .program-dropdown {
    opacity: 1;
    visibility: visible;
    transform: translateX(-50%) translateY(0);
  }
  
  /* Spalten für Seminare und Programme */
  .menu-column {
    flex: 1;
  }

  .menu-column h3 {
    font-size: 1rem;
    margin-bottom: 16px;
    color: var(--color-accent2);
    padding-bottom: 8px;
    border-bottom: 1px solid rgba(0, 0, 0, 0.05);
  }
  
  /* Teal-Farbe für Programme-Überschrift */
  .menu-column:nth-child(2) h3 {
    color: #17a689;
  }

  /* Stilregeln für alle Program-Options */
  .program-option {
    display: block;
    padding: 12px 16px;
    color: var(--color-text);
    text-decoration: none;
    font-size: 0.95rem;
    border-radius: 8px;
    transition: all 0.2s ease;
    line-height: 1.4;
    margin-bottom: 4px;
  }

  .program-option:hover {
    background: var(--color-card-bg);
    color: var(--color-accent2);
  }
  
  /* Teal-Farbe für Programme-Options beim Hover */
  .menu-column:nth-child(2) .program-option:hover {
    color: #17a689;
  }
  
  /* Speziell markierte Option - direkt bei der HTML-Definition */
  .highlight-option {
    font-weight: 600;
    background-color: var(--color-card-bg);
    color: var(--color-accent2);
    border-left: 4px solid var(--color-accent2);
    padding-left: 12px;
    border-radius: 0 8px 8px 0; /* Nur rechte Seite abgerundet */
  }
  
  /* Optionen für die Sprachauswahl */
  .lang-dropdown .program-option.active {
    font-weight: 600;
    background-color: var(--color-card-bg);
    color: var(--color-accent2);
    border-left: 4px solid var(--color-accent2);
    padding-left: 12px;
    border-radius: 0 8px 8px 0; /* Nur rechte Seite abgerundet */
  }

  /* Language Selector */
  .lang-select {
    margin-left: 32px;
    position: relative;
  }

  .lang-dropdown {
    right: -16px;
    left: auto;
    min-width: 140px;
    transform: none !important;
    display: block !important;
    padding: 8px !important;
  }

  .lang-select:hover .program-dropdown {
    transform: translateY(0) !important;
  }

  /* Verstecke den Text "Sprache Deutsch English" in der nicht-mobilen Version */
  .nav-container .lang-select + .sprache-text,
  .nav-container .lang-select ~ .sprache-text,
  .nav-container .sprache-text,
  .nav-container > div:last-child:not(.lang-select):not(.mobile-menu-btn),
  .nav-container > div:last-child:not(.lang-select):not(.mobile-menu-btn) .Sprache,
  a[href="#"] + .Sprache,
  .Sprache {
    display: none !important;
  }

  /* Mobile Menu */
  .mobile-menu-btn {
    display: none;
    background: none;
    border: none;
    padding: 8px;
    cursor: pointer;
    color: var(--color-text);
    font-size: 24px;
  }

  /* Mobile Styles */
  @media (max-width: 1024px) {
    /* Mobile Navigation */
    .nav-logo {
      z-index: 1010;
      position: relative;
      background-color: white; /* Add background to prevent text showing through */
    }
    
    .nav-menu {
      position: fixed;
      top: 0;
      right: -100%;
      width: 100%;
      background: white;
      height: 100vh;
      flex-direction: column;
      align-items: flex-start;
      padding: 80px 24px 24px;
      transition: right 0.3s ease;
      z-index: 1000;
      gap: 12px;
      margin-right: 0;
      box-shadow: -4px 0 20px rgba(0, 0, 0, 0.1);
      overflow-y: auto; /* Ermöglicht Scrollen bei Überlauf */
    }
    
    .nav-menu.active {
      right: 0;
    }
    
    .mobile-menu-btn {
      display: block;
      z-index: 1010;
      background-color: white; /* Add background to prevent text showing through */
    }
    
    .nav-link {
      padding: 12px 0;
      width: 100%;
      font-size: 1.1rem;
    }
    
    .nav-item {
      width: 100%;
    }
    
    .program-dropdown {
      position: static;
      transform: none;
      opacity: 1;
      visibility: visible;
      box-shadow: none;
      padding: 12px 0;
      min-width: auto;
      width: 100%;
      margin-top: 0;
      display: none;
      flex-direction: column;
      gap: 12px;
      border-left: none;
      background: #f8f8f8;
      border-radius: 8px;
      left: 0;
    }
    
    /* Wichtig: Deaktivierung des Hover-Effekts auf mobilen Geräten */
    .nav-item:hover .program-dropdown {
      opacity: 1;
      visibility: visible;
      transform: none;
      display: none;
    }
    
    .menu-column {
      width: 100%;
      padding: 0 12px;
    }
    
    .menu-column h3 {
      margin-top: 10px;
      font-size: 0.9rem;
      padding-left: 12px;
    }
    
    /* Add more space between last item in first column and Programme heading */
    .menu-column:nth-child(2) h3 {
      margin-top: 24px; /* Increased from 10px to 24px for more spacing */
    }
    
    .program-option {
      width: 100%;
      padding: 10px 12px;
      margin-bottom: 5px;
      font-size: 0.95rem;
      white-space: normal;
      line-height: 1.4;
    }
    
    .lang-select {
      display: none; /* Versteckt die Sprachauswahl in der mobilen Ansicht */
    }
    
    .lang-dropdown {
      width: 100%;
      right: auto;
      left: 0;
    }
    
    .mobile-lang-section {
      margin-top: 20px;
      padding-top: 20px;
      border-top: 1px solid rgba(0, 0, 0, 0.1);
    }
    
    .lang-title {
      font-size: 0.9rem;
      color: var(--color-muted);
      margin-bottom: 12px;
    }
    
    .mobile-lang-options {
      display: flex;
      gap: 8px;
    }
    
    .mobile-lang-option {
      padding: 8px 16px;
      background: var(--color-card-bg);
      border-radius: 30px;
      font-size: 0.9rem;
      color: var(--color-text);
      text-decoration: none;
    }
    
    .mobile-lang-option.active {
      background: var(--color-accent2);
      color: white;
    }
  }

  /* Swiss Flag Mini */
  .swiss-flag-mini {
    position: relative;
    width: 24px;
    height: 24px;
    background-color: var(--swiss-red);
    border-radius: 2px;
    margin-left: 6px;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    animation: wave 4s ease-in-out infinite;
    transform-origin: center left;
  }
  
  .swiss-flag-mini::after {
    content: "";
    position: absolute;
    background-color: white;
    left: 50%;
    top: 50%;
    transform: translate(-50%, -50%);
    width: 14px;
    height: 14px;
    clip-path: polygon(0% 33%, 33% 33%, 33% 0%, 66% 0%, 66% 33%, 100% 33%, 100% 66%, 66% 66%, 66% 100%, 33% 100%, 33% 66%, 0% 66%);
  }
  
  @keyframes wave {
    0% { transform: rotate(0deg); }
    25% { transform: rotate(3deg); }
    75% { transform: rotate(-3deg); }
    100% { transform: rotate(0deg); }
  }

  .made-in-text {
    font-size: 0.75rem;
    color: var(--color-muted);
    margin-left: 12px;
    display: flex;
    align-items: center;
    font-weight: 500;
  }
</style>

<!-- JavaScript für aktive Programm-Optionen und Pfadkorrektur -->
<script>
  document.addEventListener('DOMContentLoaded', function() {
    // Pfadkorrektur für verschiedene Verzeichnisebenen
    adjustNavigationPaths();
    
    // Aktuelle URL ermitteln
    const currentPath = window.location.pathname;
    const currentPage = currentPath.substring(currentPath.lastIndexOf('/') + 1);
    const urlParams = new URLSearchParams(window.location.search);
    const programParam = urlParams.get('program');
    
    // Falls wir auf einer der Programmseiten sind, fügen wir einen Programm-Parameter hinzu
    // Diese Funktion läuft beim ersten Laden der Seite und speichert den Programmtitel
    if (currentPage.startsWith('programm-seite') && !programParam) {
      try {
        // Extrahiere den Titel der aktuellen Seite aus der H1
        const pageH1 = document.querySelector('h1');
        
        if (pageH1) {
          // Füge den aktuellen Programmtitel als URL-Parameter hinzu, ohne die Seite neu zu laden
          const newUrl = new URL(window.location);
          newUrl.searchParams.set('program', pageH1.textContent.trim());
          window.history.replaceState({}, '', newUrl);
        }
      } catch (e) {
        console.error('Fehler beim Hinzufügen des Programm-Parameters:', e);
      }
    }
    
    // Hole den aktualisierten Programm-Parameter
    const updatedProgramParam = new URLSearchParams(window.location.search).get('program');
    
    // Alle Programm-Optionen im Dropdown durchgehen
    const programOptions = document.querySelectorAll('.program-option');
    let hasHighlightedOption = false;
    
    programOptions.forEach(option => {
      const optionHref = option.getAttribute('href');
      const optionText = option.textContent.trim();
      
      // Falls es einen spezifischen Programm-Parameter gibt, verwenden wir diesen
      if (updatedProgramParam && optionText.toLowerCase().includes(updatedProgramParam.toLowerCase())) {
        option.classList.add('highlight-option');
        hasHighlightedOption = true;
        return;
      }
      
      // Prüfen, ob der Link mit der aktuellen Seite übereinstimmt
      if (optionHref === currentPage) {
        // Bei mehreren Links zur gleichen Seite (programm-seite4.html) 
        // prüfen wir, ob die Seitentitel im HTML übereinstimmen
        if (currentPage === "programm-seite4.html" && !hasHighlightedOption) {
          const pageTitle = document.title;
          if (pageTitle && pageTitle.includes(optionText)) {
            option.classList.add('highlight-option');
            hasHighlightedOption = true;
          }
        } else if (!hasHighlightedOption) {
          // Bei eindeutigen Seiten einfach hervorheben
          option.classList.add('highlight-option');
          hasHighlightedOption = true;
        }
      }
    });
    
    // Fallback: Wenn keine Option hervorgehoben wurde und wir auf einer Programmseite sind,
    // heben wir die erste Option mit dem passenden Seitennamen hervor
    if (!hasHighlightedOption && currentPage.startsWith('programm-seite')) {
      programOptions.forEach(option => {
        const optionHref = option.getAttribute('href');
        if (optionHref === currentPage) {
          option.classList.add('highlight-option');
          return;
        }
      });
    }
  });
  
  // Funktion zur Pfadkorrektur je nach Position im Verzeichnisbaum
  function adjustNavigationPaths() {
    const currentPath = window.location.pathname;
    const inManagementSeminarFolder = currentPath.includes('/managementseminare/');
    
    // Links für allgemeine Navigation anpassen
    document.querySelectorAll('[data-base-href]').forEach(link => {
      const baseHref = link.getAttribute('data-base-href');
      let newHref = baseHref;
      
      // Wenn wir im Managementseminare-Ordner sind, passen wir die Pfade entsprechend an
      if (inManagementSeminarFolder) {
        const parentFolder = link.getAttribute('data-parent-folder');
        
        if (parentFolder === 'managementseminare') {
          // Wenn der Link zu einem Managementseminar führt, entfernen wir den Ordnerpfad
          newHref = baseHref;
        } else {
          // Für alle anderen Links fügen wir den relativen Pfad nach oben hinzu
          newHref = '../' + baseHref;
        }
      } else {
        // Wenn wir im Root-Verzeichnis sind
        const parentFolder = link.getAttribute('data-parent-folder');
        if (parentFolder) {
          newHref = parentFolder + '/' + baseHref;
        }
      }
      
      link.setAttribute('href', newHref);
    });
  }
</script>

<!-- Path correction script -->
<script>
  document.addEventListener('DOMContentLoaded', function() {
    // Detect page location and fix paths
    const currentPath = window.location.pathname;
    const inManagementSeminarFolder = currentPath.includes('/managementseminare/');
    
    // Only adjust links if we're in the managementseminare folder
    if (inManagementSeminarFolder) {
      // Fix managementseminare links by removing the folder prefix
      document.querySelectorAll('.menu-column a[href^="managementseminare/"]').forEach(link => {
        const originalHref = link.getAttribute('href');
        // Extract just the filename
        const fileName = originalHref.replace('managementseminare/', '');
        // Set the correct relative path
        link.setAttribute('href', fileName);
      });
      
      // Fix main navigation links to point back up one level
      document.querySelectorAll('.nav-menu > a:not(.toggle-subnav)').forEach(link => {
        const originalHref = link.getAttribute('href');
        if (originalHref && !originalHref.startsWith('#') && !originalHref.startsWith('http')) {
          link.setAttribute('href', '../' + originalHref);
        }
      });
      
      // Fix the logo link to point to homepage
      const logoLink = document.querySelector('.nav-logo');
      if (logoLink) {
        logoLink.setAttribute('href', '../startseite.html');
      }
    }
  });
</script>