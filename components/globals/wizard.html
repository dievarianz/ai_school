<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Weiterbildungsberater</title>
  <link href="https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css" rel="stylesheet">
  <style>
    :root{
      --font-sans:-apple-system,BlinkMacSystemFont,"San Francisco","Segoe UI",Roboto,Oxygen,Ubuntu,Cantarell,"Open Sans","Helvetica Neue",sans-serif;
      --color-text:#1d1d1f;
      --color-muted:#6e6e73;
      --color-card-bg:#f5f5f7;
      --color-accent2:#970289;
      --color-badge:#e2b245;
      --color-badge-hover:#d4a535;
      --spacing:24px;
      --radius:16px;
      --max-width:1200px;
      --imt-purple: #6e45e2;
      --imt-green: #4CAF50;
    }
    body {
      font-family: var(--font-sans);
      color: var(--color-text);
      background-color: #f0f2f5; /* Hintergrund für die Seite */
      margin: 0;
      padding: 0;
      display: flex;
      justify-content: center;
      align-items: flex-start; /* Oben ausrichten, damit man scrollen kann */
      min-height: 100vh;
      padding-top: 40px; /* Platz oben */
      padding-bottom: 40px; /* Platz unten */
    }

    /* Stile für den .page-container, der das .modal-content umschließt */
    .page-container {
        width: 100%;
        max-width: 900px; /* Gleiche max-width wie .modal-content */
        margin: 0 auto; /* Zentrieren */
    }

    /* Bestehende Modal-Styles, angepasst für eine normale Seite */
    /* .modal-overlay ist nicht mehr nötig, da es keine Überlagerung gibt. */
    /* Das .modal-content wird zum Hauptcontainer der Seite. */
    
    .wizard-main-content { /* Umbenannt von .modal-content */
      background: white;
      border-radius: var(--radius);
      width: 100%;
      /* max-width: 900px; /* Wird vom page-container übernommen */
      /* max-height: 90vh; /* Nicht mehr nötig, Seite kann scrollen */
      overflow-y: auto; /* Beibehalten, falls interner Inhalt scrollt */
      position: relative;
      box-shadow: 0 5px 15px rgba(0,0,0,0.1); /* Leichter Schatten für Seiten-Look */
    }

    .wizard-header { /* Umbenannt von .modal-header */
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 16px 24px;
      border-bottom: 1px solid #e5e5e7;
      background: var(--color-card-bg);
      border-radius: var(--radius) var(--radius) 0 0;
      position: relative;
    }

    .wizard-header-left {
      display: flex;
      align-items: center;
      gap: 12px;
      width: 200px;
    }

    .wizard-header-center {
      position: absolute;
      left: 50%;
      transform: translateX(-50%);
      display: flex;
      justify-content: center;
    }

    .wizard-mini-icon {
      width: 34px;
      height: 34px;
      background: #f59e0b;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      box-shadow: 0 4px 12px rgba(245, 158, 11, 0.3);
    }

    .wizard-mini-icon i {
      font-size: 0.9rem;
      color: white;
    }

    .wizard-logo {
      height: 32px;
      width: auto;
    }

    .wizard-header h2 {
      font-size: 1.3rem;
      font-weight: 700;
      margin: 0;
      background: linear-gradient(90deg, #222 0%, #b0b0b0 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      text-fill-color: transparent;
      letter-spacing: -0.01em;
      line-height: 1.2;
    }

    /* Fallback for browsers that don't support background-clip: text */
    @supports not (-webkit-background-clip: text) {
      .wizard-header h2 {
        color: #222;
        background: none;
      }
    }

    .wizard-close-button { /* Umbenannt von .modal-close */
      background: transparent;
      border: none;
      font-size: 1.3rem;
      color: var(--color-muted);
      cursor: pointer;
      padding: 6px;
      border-radius: 6px;
      transition: all 0.2s ease;
      display: flex;
      align-items: center;
      justify-content: center;
      width: 32px;
      height: 32px;
      text-decoration: none; /* Für Link-Styling */
    }

    .wizard-close-button:hover {
      background: rgba(0, 0, 0, 0.1);
      color: var(--color-text);
    }

    .wizard-body { /* Umbenannt von .modal-wizard */
      padding: 20px 24px;
      background: var(--color-card-bg);
      border-radius: 0;
    }

    /* Progress Bar */
    .progress-bar {
      display: flex;
      align-items: center;
      margin-bottom: 20px;
      justify-content: center;
    }

    .progress-step {
      width: 28px;
      height: 28px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      background: #e5e5e7;
      color: var(--color-muted);
      font-weight: 600;
      font-size: 11px;
      position: relative;
      transition: all 0.3s ease;
    }

    .progress-step.active {
      background: var(--imt-purple);
      color: white;
      transform: scale(1.1);
    }

    .progress-step.completed {
      background: var(--imt-green);
      color: white;
    }

    .progress-connector {
      width: 35px;
      height: 2px;
      background: #e5e5e7;
      margin: 0 6px;
      transition: all 0.3s ease;
    }

    .progress-connector.active {
      background: var(--imt-purple);
    }

    .progress-connector.completed {
      background: var(--imt-green);
    }

    /* Wizard Steps */
    .wizard-step {
      display: none;
    }

    .wizard-step.active {
      display: block;
    }

    .question-container {
      text-align: center;
      margin-bottom: 16px;
    }

    .question-title {
      font-size: 1.2rem;
      font-weight: 600;
      margin-bottom: 0.4rem;
      color: var(--color-text);
      line-height: 1.3;
    }

    .question-subtitle {
      font-size: 0.9rem;
      color: var(--color-muted);
      margin-bottom: 1rem;
    }

    .options-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
      gap: 10px;
      margin-bottom: 16px;
    }

    .option-card {
      background: white;
      border: 2px solid #e5e5e7;
      border-radius: 8px;
      padding: 14px 10px;
      cursor: pointer;
      transition: all 0.3s ease;
      text-align: center;
      position: relative;
      min-height: 85px;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
    }

    .option-card:hover {
      border-color: var(--imt-purple);
    }

    .option-card.selected {
      border-color: var(--imt-purple);
      background: rgba(110, 69, 226, 0.05);
    }

    .option-card.selected::after {
      content: '✓';
      position: absolute;
      top: 8px;
      right: 8px;
      background: var(--imt-purple);
      color: white;
      width: 20px;
      height: 20px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 12px;
      font-weight: bold;
    }

    .option-icon {
      font-size: 1.6rem;
      color: var(--imt-purple);
      margin-bottom: 0.4rem;
    }

    .option-title {
      font-size: 0.95rem;
      font-weight: 600;
      margin-bottom: 0.2rem;
      color: var(--color-text);
      line-height: 1.2;
    }

    .option-description {
      font-size: 0.8rem;
      color: var(--color-muted);
      line-height: 1.3;
    }

    /* Preferences Sections */
    .preferences-section {
      margin-bottom: 1rem;
    }

    .preferences-section h4 {
      font-size: 0.9rem;
      margin-bottom: 0.6rem;
      color: var(--color-text);
      font-weight: 600;
    }

    .preferences-grid {
      grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
      margin-bottom: 0;
    }

    .preferences-grid .option-card {
      min-height: 60px;
      padding: 10px 6px;
    }

    .preferences-grid .option-icon {
      font-size: 1.2rem;
      margin-bottom: 0.2rem;
    }

    .preferences-grid .option-title {
      font-size: 0.85rem;
      margin-bottom: 0;
    }

    /* Navigation */
    .wizard-navigation {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-top: 20px;
    }

    .wizard-navigation.has-back {
      justify-content: space-between;
    }

    .btn {
      padding: 10px 20px;
      border-radius: 8px;
      border: none;
      font-weight: 600;
      cursor: pointer;
      display: flex;
      align-items: center;
      gap: 8px;
      transition: all 0.2s ease;
      font-family: var(--font-sans);
      text-decoration: none;
      background: var(--imt-purple);
      color: white;
      font-size: 1rem;
    }

    .btn:hover {
      background: #5a37c8;
    }

    .btn:disabled {
      background: #e5e5e7;
      color: var(--color-muted);
      cursor: not-allowed;
      transform: none;
    }

    .btn-secondary {
      background: transparent;
      color: var(--color-muted);
      border: 1px solid #e5e5e7;
    }

    .btn-secondary:hover {
      background: #f5f5f7;
      color: var(--color-text);
    }
    
    .btn-link { /* Für den "Zurück"-Link */
        background: transparent;
        color: var(--imt-purple);
        border: none;
        padding: 10px 0; /* Weniger Padding, da es ein Link ist */
        text-decoration: none;
        font-size: 0.9rem;
    }
    .btn-link:hover {
        color: #5a37c8;
        text-decoration: underline;
        transform: none; /* Kein transform für Links */
        background: transparent;
    }

    /* ============ RESULT CARD ============ */
    .result-card {
      background: white;
      color: var(--color-text);
      border-radius: var(--radius);
      padding: 48px 32px;
      text-align: center;
      border: 1px solid #e5e5e7;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    }

    .result-title {
      font-size: 1.75rem;
      font-weight: 700;
      margin-bottom: 8px;
      letter-spacing: -0.02em;
      color: var(--imt-purple);
    }

    .result-subtitle {
      font-size: 1.1rem;
      color: var(--color-muted);
      margin-bottom: 32px;
      font-weight: 400;
    }

    .recommended-program {
      background: white;
      color: var(--color-text);
      border-radius: 16px;
      padding: 24px;
      margin-bottom: 16px;
      position: relative;
      border: 1px solid #e5e5e7;
      transition: all 0.3s ease;
    }

    .recommended-program:hover {
      border-color: var(--imt-purple);
    }

    .recommended-program .program-name {
      color: var(--color-text);
      font-size: 1.25rem;
      font-weight: 600;
      margin-bottom: 12px;
      letter-spacing: -0.01em;
      line-height: 1.3;
    }

    .recommended-program .program-detail {
      color: var(--color-muted);
    }

    .recommended-program .program-detail i {
      color: var(--imt-purple);
    }

    .recommended-program .program-description {
      color: var(--color-muted);
    }

    .program-name {
      font-size: 1.25rem;
      font-weight: 600;
      margin-bottom: 12px;
      color: var(--color-text);
      letter-spacing: -0.01em;
      line-height: 1.3;
    }

    .program-details {
      display: flex;
      justify-content: flex-start;
      gap: 16px;
      flex-wrap: wrap;
      margin-bottom: 16px;
    }

    .program-detail {
      display: flex;
      align-items: center;
      gap: 6px;
      font-size: 0.9rem;
      color: var(--color-muted);
      font-weight: 500;
    }

    .program-detail i {
      font-size: 1rem;
      color: var(--imt-purple);
    }

    .program-description {
      font-size: 0.95rem;
      color: var(--color-muted);
      line-height: 1.5;
      margin-bottom: 20px;
      font-weight: 400;
    }

    /* ============ MULTIPLE PROGRAMS ============ */
    .multiple-programs {
      display: flex;
      flex-direction: column;
      gap: 16px;
    }

    .multiple-programs .recommended-program {
      margin-bottom: 0;
      text-align: left;
    }

    .multiple-programs .recommended-program.best-match {
      background: white;
      border: 2px solid var(--imt-purple);
      box-shadow: 0 4px 20px rgba(110, 69, 226, 0.15);
    }

    .best-match-badge {
      position: absolute;
      top: -8px;
      right: 16px;
      background: var(--imt-green);
      color: white;
      padding: 4px 12px;
      border-radius: 12px;
      font-size: 0.75rem;
      font-weight: 600;
      display: flex;
      align-items: center;
      gap: 4px;
      box-shadow: 0 2px 8px rgba(76, 175, 80, 0.3);
    }

    .program-actions {
      display: flex;
      gap: 12px;
      margin-top: 0;
      flex-wrap: wrap;
      justify-content: flex-start;
    }

    .btn-small {
      padding: 6px 14px;
      font-size: 0.9rem;
      min-height: 32px;
      border-radius: 12px;
      font-weight: 600;
      transition: all 0.2s ease;
    }

    .result-actions {
      margin-top: 24px;
      display: flex;
      gap: 16px;
      justify-content: center;
      flex-wrap: wrap;
    }

    .btn-white {
      background: white;
      color: var(--imt-purple);
      border: 1px solid var(--imt-purple);
      box-shadow: 0 2px 8px rgba(110, 69, 226, 0.15);
    }

    .btn-white:hover {
      background: var(--imt-purple);
      color: white;
      transform: translateY(-1px);
      box-shadow: 0 4px 16px rgba(110, 69, 226, 0.25);
    }

    .btn-transparent {
      background: rgba(255, 255, 255, 0.15);
      color: white;
      border: 1px solid rgba(255, 255, 255, 0.3);
      backdrop-filter: blur(10px);
    }

    .btn-transparent:hover {
      background: rgba(255, 255, 255, 0.25);
      color: white;
      transform: translateY(-1px);
    }

    /* Styling für den Ergebnis-Container (wizard-step-4) */
    #wizard-step-4 {
      background-color: transparent;
      padding: 0;
      border-radius: 0;
    }

    #wizard-step-4 .wizard-body {
      background: var(--color-card-bg);
      padding: 20px 24px;
    }

    /* Navigation Buttons für Schritt 4 */
    #wizard-step-4 .wizard-navigation {
      margin-top: 32px;
    }

    #wizard-step-4 .wizard-navigation .btn-secondary, 
    #wizard-step-4 .wizard-navigation .btn-link {
        background-color: transparent; 
        border: 1px solid #e5e5e7;
        color: var(--color-muted);
        border-radius: 8px;
        padding: 10px 20px;
        font-weight: 600;
        transition: all 0.2s ease;
    }

    #wizard-step-4 .wizard-navigation .btn-secondary:hover,
    #wizard-step-4 .wizard-navigation .btn-link:hover {
        background-color: #f5f5f7;
        color: var(--color-text);
        transform: translateY(-1px);
        text-decoration: none;
    }
    
    #wizard-step-4 .wizard-navigation .btn-link {
        text-decoration: none; 
    }

    /* Mobile optimizations */
    @media (max-width: 768px) {
      body {
        padding-top: 20px;
        padding-bottom: 20px;
      }
      .wizard-body { /* Angepasst von .modal-wizard */
        padding: 15px 16px;
      }
      .options-grid {
        grid-template-columns: 1fr;
      }
      .preferences-grid {
        grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
      }
      .result-actions, .program-actions {
        flex-direction: column;
      }
      
      /* Mobile optimizations for results page */
      .result-card {
        padding: 24px 16px;
      }
      
      #wizard-step-4 {
        padding: 20px 16px;
      }
      
      .recommended-program {
        padding: 16px;
        margin-bottom: 12px;
      }
      
      .result-title {
        font-size: 1.5rem;
        margin-bottom: 6px;
      }
      
      .result-subtitle {
        font-size: 1rem;
        margin-bottom: 24px;
      }
      
      .program-name {
        font-size: 1.1rem;
        margin-bottom: 10px;
      }
      
      .program-details {
        gap: 12px;
        margin-bottom: 12px;
      }
      
      .program-detail {
        font-size: 0.85rem;
      }
      
      .program-description {
        font-size: 0.9rem;
        margin-bottom: 16px;
      }
      
      .result-actions {
        margin-top: 20px;
        gap: 12px;
      }
      
      .btn-small {
        padding: 8px 12px;
        font-size: 0.85rem;
      }
      
      /* Hide the "Back to Homepage" button on mobile in step 4 */
      #wizard-step-4 .wizard-navigation .btn-link {
        display: none;
      }
      
      /* Center the remaining button */
      #wizard-step-4 .wizard-navigation {
        justify-content: center;
      }
      
      .wizard-header {
        padding: 12px 16px;
      }
      
      .wizard-logo {
        height: 28px;
      }
      
      .wizard-header h2 {
        font-size: 1.1rem;
      }
      
      .wizard-header-left {
        gap: 8px;
      }
    }

    /* Copyright Footer im Wizard */
    .wizard-copyright {
      margin-top: 0;
      padding: 15px 24px;
      border-top: 1px solid rgba(0,0,0,0.1);
      background: var(--color-card-bg);
      font-size: 0.85rem;
      color: var(--color-muted);
      text-align: left;
    }
  </style>
</head>
<body>

  <div class="page-container"> <!-- Neuer Container für die Seite -->
    <div class="wizard-main-content"> <!-- Umbenannt von .modal-content -->
      <div class="wizard-header"> <!-- Umbenannt von .modal-header -->
        <div class="wizard-header-left">
          <div class="wizard-mini-icon" onclick="wizardRestartWizard()" style="cursor: pointer;" title="Zum Anfang zurückkehren">
            <i class='bx bx-bulb'></i>
          </div>
        </div>
        <div class="wizard-header-center">
          <h2>Weiterbildungsberater</h2>
        </div>
        <!-- Der Schließen-Button navigiert jetzt einfach zurück -->
        <a href="javascript:history.back()" class="wizard-close-button" title="Zurück">
          <i class='bx bx-x'></i>
        </a>
      </div>
      
      <div class="wizard-body"> <!-- Umbenannt von .modal-wizard -->
        <div class="progress-bar">
          <div class="progress-step active" id="wizard-step-indicator-1">1</div>
          <div class="progress-connector" id="wizard-connector-1"></div>
          <div class="progress-step" id="wizard-step-indicator-2">2</div>
          <div class="progress-connector" id="wizard-connector-2"></div>
          <div class="progress-step" id="wizard-step-indicator-3">3</div>
          <div class="progress-connector" id="wizard-connector-3"></div>
          <div class="progress-step" id="wizard-step-indicator-4">4</div>
        </div>

        <!-- Wizard Step 1 -->
        <div class="wizard-step active" id="wizard-step-1">
          <div class="question-container">
            <h3 class="question-title">Was ist Ihr primäres Lernziel?</h3>
            <p class="question-subtitle">Wählen Sie den Bereich aus, in dem Sie sich weiterentwickeln möchten</p>
          </div>
          <div class="options-grid">
            <div class="option-card" data-value="strategy">
              <i class='bx bx-trending-up option-icon'></i>
              <div class="option-title">Strategisches Management</div>
              <div class="option-description">Unternehmensführung, Strategieentwicklung und Transformation</div>
            </div>
            <div class="option-card" data-value="leadership">
              <i class='bx bx-user-check option-icon'></i>
              <div class="option-title">Führungskompetenzen</div>
              <div class="option-description">Leadership, Teamführung und Mitarbeiterentwicklung</div>
            </div>
            <div class="option-card" data-value="finance">
              <i class='bx bx-money option-icon'></i>
              <div class="option-title">Financial Management</div>
              <div class="option-description">Finanzsteuerung, Controlling und Investitionsentscheidungen</div>
            </div>
            <div class="option-card" data-value="ai">
              <i class='bx bx-brain option-icon'></i>
              <div class="option-title">KI & Digitalisierung</div>
              <div class="option-description">Künstliche Intelligenz, Automatisierung und digitale Transformation</div>
            </div>
            <div class="option-card" data-value="marketing">
              <i class='bx bx-bullseye option-icon'></i>
              <div class="option-title">Marketing & Sales</div>
              <div class="option-description">Markenführung, Vertrieb und Kommunikationsstrategien</div>
            </div>
            <div class="option-card" data-value="comprehensive">
              <i class='bx bx-selection option-icon'></i>
              <div class="option-title">Ganzheitliches Management</div>
              <div class="option-description">Umfassende Managementkompetenzen in allen Bereichen</div>
            </div>
          </div>
          <div class="wizard-navigation">
            <a href="javascript:history.back()" class="btn btn-link">Zurück zur Hauptseite</a>
            <button class="btn" id="wizard-next-1" onclick="wizardNextStep(1)">
              Weiter <i class='bx bx-chevron-right'></i>
            </button>
          </div>
        </div>

        <!-- Wizard Step 2 -->
        <div class="wizard-step" id="wizard-step-2">
          <div class="question-container">
            <h3 class="question-title">Wie viel Zeit können Sie investieren?</h3>
            <p class="question-subtitle">Wählen Sie den Zeitrahmen, der zu Ihrem Terminplan passt</p>
          </div>
          <div class="options-grid">
            <div class="option-card" data-value="short">
              <i class='bx bx-time-five option-icon'></i>
              <div class="option-title">3-4 Tage</div>
              <div class="option-description">Kompakte Managementseminare für schnelle Weiterbildung</div>
            </div>
            <div class="option-card" data-value="medium">
              <i class='bx bx-calendar option-icon'></i>
              <div class="option-title">3-4 Monate</div>
              <div class="option-description">Modulare Programme für fundierte Qualifikation</div>
            </div>
            <div class="option-card" data-value="long">
              <i class='bx bx-calendar-star option-icon'></i>
              <div class="option-title">12+ Monate</div>
              <div class="option-description">Umfassende MBA-Programme für Karrieresprung</div>
            </div>
          </div>
          <div class="wizard-navigation has-back">
            <button class="btn btn-secondary" onclick="wizardPrevStep(2)">
              <i class='bx bx-chevron-left'></i> Zurück
            </button>
            <button class="btn" id="wizard-next-2" onclick="wizardNextStep(2)">
              Weiter <i class='bx bx-chevron-right'></i>
            </button>
          </div>
        </div>

        <!-- Wizard Step 3 -->
        <div class="wizard-step" id="wizard-step-3">
          <div class="question-container">
            <h3 class="question-title">Welche Präferenzen haben Sie?</h3>
            <p class="question-subtitle">Sprache und gewünschte Zertifizierung (alle Angaben optional)</p>
          </div>
          <div class="preferences-section" style="margin-bottom: 2rem;">
            <h4 style="margin-bottom: 1rem; color: var(--color-text); font-weight: 600;">Bevorzugte Sprache:</h4>
            <div class="options-grid preferences-grid" style="grid-template-columns: repeat(auto-fit, minmax(160px, 1fr)); margin-bottom: 0;">
              <div class="option-card" data-value="de" data-type="language">
                <i class='bx bx-flag option-icon'></i><div class="option-title">Deutsch</div>
              </div>
              <div class="option-card" data-value="en" data-type="language">
                <i class='bx bx-world option-icon'></i><div class="option-title">Englisch</div>
              </div>
              <div class="option-card" data-value="both" data-type="language">
                <i class='bx bx-globe option-icon'></i><div class="option-title">Beides möglich</div>
              </div>
            </div>
          </div>
          <div class="preferences-section">
            <h4 style="margin-bottom: 1rem; color: var(--color-text); font-weight: 600;">Gewünschte Mindest-Zertifizierung:</h4>
            <div class="options-grid preferences-grid" style="grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));">
              <div class="option-card" data-value="none" data-type="certification">
                <i class='bx bx-bookmark option-icon'></i><div class="option-title">Nicht erforderlich</div>
              </div>
              <div class="option-card" data-value="ects" data-type="certification">
                <i class='bx bx-award option-icon'></i><div class="option-title">Mindestens ECTS</div>
              </div>
              <div class="option-card" data-value="cas" data-type="certification">
                <i class='bx bx-certification option-icon'></i><div class="option-title">Mindestens CAS</div>
              </div>
              <div class="option-card" data-value="mba" data-type="certification">
                <i class='bx bx-medal option-icon'></i><div class="option-title">MBA-Abschluss</div>
              </div>
            </div>
          </div>
          <div class="wizard-navigation has-back">
            <button class="btn btn-secondary" onclick="wizardPrevStep(3)">
              <i class='bx bx-chevron-left'></i> Zurück
            </button>
            <button class="btn" id="wizard-next-3" onclick="wizardNextStep(3)">
              Empfehlung erhalten <i class='bx bx-sparkles'></i>
            </button>
          </div>
        </div>

        <!-- Wizard Step 4 -->
        <div class="wizard-step" id="wizard-step-4">
          <div class="result-card" id="wizard-result-content">
            <!-- Dynamic content will be inserted here -->
          </div>
          <div class="wizard-navigation" style="margin-top: 2rem;">
            <button class="btn btn-secondary" onclick="wizardRestartWizard()">
              <i class='bx bx-refresh'></i> Erneut starten
            </button>
            <a href="javascript:history.back()" class="btn btn-link">Zurück zur Hauptseite</a>
          </div>
        </div>
      </div> <!-- Ende .wizard-body -->
      
      <!-- Copyright Footer im Wizard -->
      <div class="wizard-copyright">
        <div style="display: flex; justify-content: space-between; align-items: center; width: 100%;">
          <a href="javascript:history.back()" style="text-decoration: none;">
            <img src="../../assets/pictures/imt_logo.png" alt="IMT Logo" style="height: 24px; cursor: pointer;">
          </a>
          <span>©2025 StGallen imt Business School</span>
        </div>
      </div>
    </div> <!-- Ende .wizard-main-content -->
  </div> <!-- Ende .page-container -->

<script>
  // Wizard state (nicht mehr "modal" spezifisch)
  let currentWizardStep = 1; // Umbenannt
  let wizardSelections = { // Umbenannt
    goal: null,
    timeframe: null,
    language: null,
    certification: null
  };

  // Program database (identisch)
  const programs = {
    'integrated_management_strategy': {
      name: 'Integrated Management and Strategy',
      type: 'Managementseminar',
      duration: '3 Tage',
      language: ['de', 'en'],
      certification: ['none', 'ects'],
      price: 'CHF 2.400',
      description: 'Lernen Sie, integriertes Management wirksam einzusetzen – für strategische Ausrichtung, erfolgreiche Transformation und den nachhaltigen Einsatz von KI.',
      goals: ['strategy', 'comprehensive'],
      detailsUrl: '../../integrated_management_strategy.html',
      registerUrl: '#'
    },
    'financial_management': {
      name: 'Financial Management',
      type: 'Managementseminar',
      duration: '3 Tage',
      language: ['de', 'en'],
      certification: ['none', 'ects'],
      price: 'CHF 2.400',
      description: 'Entwickeln Sie finanzielle Entscheidungskompetenz, um strategisches Wachstum gezielt zu steuern.',
      goals: ['finance', 'comprehensive'],
      detailsUrl: '../../financial_management.html',
      registerUrl: '#'
    },
    'inspirational_leadership': {
      name: 'Inspirational Leadership',
      type: 'Managementseminar',
      duration: '3 Tage',
      language: ['de', 'en'],
      certification: ['none', 'ects'],
      price: 'CHF 2.400',
      description: 'Entwickeln Sie Ihre Führungspersönlichkeit für klare, empathische und strategische Führung in Zeiten digitaler und KI-getriebener Veränderung.',
      goals: ['leadership', 'comprehensive'],
      detailsUrl: '../../inspirational_leadership.html',
      registerUrl: '#'
    },
    'marketing_sales': {
      name: 'Marketing, Sales and Brand Communication',
      type: 'Managementseminar',
      duration: '3 Tage',
      language: ['de', 'en'],
      certification: ['none', 'ects'],
      price: 'CHF 2.400',
      description: 'Lernen Sie, wie Sie Marketing und Vertrieb mit Strategie und KI wirkungsvoll für nachhaltigen Markterfolg einsetzen.',
      goals: ['marketing', 'comprehensive'],
      detailsUrl: '../../marketing_sales_brand_communication.html',
      registerUrl: '#'
    },
    'intelligent_process_automation': {
      name: 'Intelligent Process Automation',
      type: 'Managementseminar',
      duration: '3 Tage',
      language: ['de', 'en'],
      certification: ['none', 'ects'],
      price: 'CHF 2.400',
      description: 'Lernen Sie, wie Sie intelligente Automatisierung effizient nutzen, um Geschäftsprozesse zu optimieren.',
      goals: ['ai', 'comprehensive'],
      detailsUrl: '../../intelligent_process_automation.html',
      registerUrl: '#'
    },
    'ai_decision_making': {
      name: 'KI-Augmented Decision Making',
      type: 'Managementseminar',
      duration: '3 Tage',
      language: ['de', 'en'],
      certification: ['none', 'ects'],
      price: 'CHF 2.400',
      description: 'Lernen Sie, wie KI-gestützte Entscheidungsprozesse Ihnen helfen, fundiertere und effektivere Entscheidungen zu treffen.',
      goals: ['ai', 'comprehensive'],
      detailsUrl: '../../ai_augmented_decision_making.html',
      registerUrl: '#'
    },
    'management_programm': {
      name: 'StGallen Management Programm',
      type: 'Programm',
      duration: '4x3 Tage',
      language: ['de'],
      certification: ['none'],
      price: 'CHF 8.400',
      description: 'Umfassendes Programm zur Integration von Management-Know-how mit praxisorientierten Ansätzen und zertifiziertem Abschluss.',
      goals: ['comprehensive', 'strategy', 'leadership', 'finance', 'marketing'],
      detailsUrl: '../../management_programm.html',
      registerUrl: '#'
    },
    'management_programm_cas': {
      name: 'StGallen Management Programm CAS',
      type: 'CAS Programm',
      duration: '4x3 Tage plus 4 Tage hybrid',
      language: ['de'],
      certification: ['cas'],
      price: 'CHF 12.400',
      ects: '20 ECTS',
      description: 'Certificate of Advanced Studies mit vertieftem Management-Know-how und anerkanntem akademischen Abschluss.',
      goals: ['comprehensive', 'strategy', 'leadership', 'finance', 'marketing'],
      detailsUrl: '../../management_programm_cas.html',
      registerUrl: '#'
    },
    'ki_excellence': {
      name: 'StGallen KI Excellence Management Programm',
      type: 'Programm',
      duration: '4x3 Tage',
      language: ['de', 'en'],
      certification: ['none'],
      price: 'CHF 8.400',
      description: 'Spezialisiertes Programm zur Integration künstlicher Intelligenz in das Management mit Zertifizierung.',
      goals: ['ai', 'strategy', 'comprehensive'],
      detailsUrl: '../../ki_excellence_programm.html',
      registerUrl: '#'
    },
    'fast_track_mba': {
      name: 'StGallen Fast Track MBA Programm',
      type: 'MBA Programm',
      duration: '7x3-4 Tage plus 7 Tage hybrid',
      language: ['de', 'en'],
      certification: ['mba'],
      price: 'CHF 24.900',
      description: 'Beschleunigtes MBA-Programm mit Fokus auf Management und Technologie für aufstrebende Führungskräfte.',
      goals: ['comprehensive', 'strategy', 'leadership', 'finance', 'marketing', 'ai'],
      detailsUrl: '../../fast_track_mba.html',
      registerUrl: '#'
    }
  };

  // Wizard-Funktionen (umbenannt von modal... zu wizard...)
  function wizardNextStep(step) { // Umbenannt
    if (step === 3) {
      showWizardResults(); // Umbenannt
      return;
    }
    document.getElementById(`wizard-step-${step}`).classList.remove('active');
    document.getElementById(`wizard-step-indicator-${step}`).classList.remove('active');
    document.getElementById(`wizard-step-indicator-${step}`).classList.add('completed');
    document.getElementById(`wizard-connector-${step}`).classList.add('completed');
    
    currentWizardStep = step + 1;
    document.getElementById(`wizard-step-${currentWizardStep}`).classList.add('active');
    document.getElementById(`wizard-step-indicator-${currentWizardStep}`).classList.add('active');
    
    if (currentWizardStep > 1) {
      document.getElementById(`wizard-connector-${currentWizardStep - 1}`).classList.add('active');
    }
  }

  function wizardPrevStep(step) { // Umbenannt
    document.getElementById(`wizard-step-${step}`).classList.remove('active');
    document.getElementById(`wizard-step-indicator-${step}`).classList.remove('active');
    document.getElementById(`wizard-step-indicator-${step - 1}`).classList.remove('completed');
    document.getElementById(`wizard-connector-${step - 1}`).classList.remove('active');
    
    currentWizardStep = step - 1;
    document.getElementById(`wizard-step-${currentWizardStep}`).classList.add('active');
    document.getElementById(`wizard-step-indicator-${currentWizardStep}`).classList.add('active');
    
    if (currentWizardStep > 1) {
      document.getElementById(`wizard-connector-${currentWizardStep - 1}`).classList.add('active');
    }
  }

  function showWizardResults() {
    document.getElementById('wizard-step-3').classList.remove('active');
    document.getElementById('wizard-step-indicator-3').classList.remove('active');
    document.getElementById('wizard-step-indicator-3').classList.add('completed');
    document.getElementById('wizard-connector-3').classList.add('completed');
    
    currentWizardStep = 4;
    document.getElementById('wizard-step-4').classList.add('active');
    document.getElementById('wizard-step-indicator-4').classList.add('active');
    
    const recommendedPrograms = findBestMatchesWizard();
    displayWizardResults(recommendedPrograms);
  }

  function displayWizardResults(recommendedPrograms) {
    const resultContent = document.getElementById('wizard-result-content');
    
    if (recommendedPrograms.length === 0) {
      resultContent.innerHTML = `
        <div class="result-title">Keine passende Weiterbildung gefunden</div>
        <div class="result-subtitle">Versuchen Sie andere Einstellungen oder kontaktieren Sie uns direkt für eine Beratung.</div>
      `;
      return;
    }
    
    if (recommendedPrograms.length === 1) {
      const program = recommendedPrograms[0];
      resultContent.innerHTML = `
        <div class="result-title">Perfekte Übereinstimmung!</div>
        <div class="result-subtitle">Diese Weiterbildung passt optimal zu Ihren Anforderungen</div>
        <a href="${program.detailsUrl}" class="recommended-program best-match" style="text-decoration: none; color: inherit; display: block; cursor: pointer;">
          <div class="best-match-badge"><i class="bx bx-star"></i> Beste Übereinstimmung</div>
          <div class="program-name">${program.name}</div>
          <div class="program-details">
            <div class="program-detail"><i class='bx bx-time'></i> ${program.duration}</div>
            <div class="program-detail"><i class='bx bx-bookmark'></i> ${program.type}</div>
            ${program.ects ? `<div class="program-detail"><i class='bx bx-award'></i> ${program.ects}</div>` : ''}
            <div class="program-detail"><i class='bx bx-money'></i> ${program.price}</div>
          </div>
          <p class="program-description">${program.description}</p>
        </a>
      `;
    } else {
      const programsHtml = recommendedPrograms.map((program, index) => `
        <a href="${program.detailsUrl}" class="recommended-program ${index === 0 ? 'best-match' : ''}" style="text-decoration: none; color: inherit; display: block; cursor: pointer;">
          ${index === 0 ? '<div class="best-match-badge"><i class="bx bx-star"></i> Beste Übereinstimmung</div>' : ''}
          <div class="program-name">${program.name}</div>
          <div class="program-details">
            <div class="program-detail"><i class='bx bx-time'></i> ${program.duration}</div>
            <div class="program-detail"><i class='bx bx-bookmark'></i> ${program.type}</div>
            ${program.ects ? `<div class="program-detail"><i class='bx bx-award'></i> ${program.ects}</div>` : ''}
            <div class="program-detail"><i class='bx bx-money'></i> ${program.price}</div>
          </div>
          <p class="program-description">${program.description}</p>
        </a>
      `).join('');
      
      resultContent.innerHTML = `
        <div class="result-title">Mehrere Programme passen zu Ihnen!</div>
        <div class="result-subtitle">Wir haben ${recommendedPrograms.length} passende Programme gefunden - sortiert nach Relevanz</div>
        <div class="multiple-programs">${programsHtml}</div>
      `;
    }
  }

  function findBestMatchesWizard() {
    const programsWithScores = [];
    
    for (const [key, program] of Object.entries(programs)) {
      let score = 0;
      let reasons = [];
      
      // Zertifizierungs-Filter mit Mindestanforderung
      let certificationMatch = false;
      if (!wizardSelections.certification || wizardSelections.certification === 'none') {
        // Keine Zertifizierung gewünscht - alle Programme okay
        certificationMatch = true;
      } else if (wizardSelections.certification === 'ects') {
        // ECTS gewünscht - ECTS, CAS und MBA Programme
        certificationMatch = program.certification.includes('ects') || 
                           program.certification.includes('cas') || 
                           program.certification.includes('mba');
      } else if (wizardSelections.certification === 'cas') {
        // CAS gewünscht - CAS und MBA Programme
        certificationMatch = program.certification.includes('cas') || 
                           program.certification.includes('mba');
      } else if (wizardSelections.certification === 'mba') {
        // MBA gewünscht - nur MBA Programme
        certificationMatch = program.certification.includes('mba');
      }
      
      if (!certificationMatch) {
        continue; // Programm ausschließen
      }
      
      // Alle Programme sind in allen Sprachen verfügbar (Übersetzung möglich)
      // Sprachpräferenz wird nur als Bonus gewertet, nicht als harter Filter
      
      // Zeitrahmen-Filter (weicher - wenn keine Auswahl, dann alle)
      let timeframeScore = 0;
      if (wizardSelections.timeframe) {
        if (wizardSelections.timeframe === 'short' && program.duration.includes('3 Tage')) {
          timeframeScore = 8;
          reasons.push('Passt zu Ihrem gewünschten Zeitrahmen (3-4 Tage)');
        } else if (wizardSelections.timeframe === 'medium' && (program.duration.includes('4x3') && !program.type.includes('MBA'))) {
          timeframeScore = 8;
          reasons.push('Passt zu Ihrem gewünschten Zeitrahmen (3-4 Monate)');
        } else if (wizardSelections.timeframe === 'long' && program.type.includes('MBA')) {
          timeframeScore = 8;
          reasons.push('Passt zu Ihrem gewünschten Zeitrahmen (12+ Monate)');
        } else {
          timeframeScore = 2; // Nicht optimal, aber nicht ausschließen
        }
      } else {
        timeframeScore = 5; // Neutral wenn keine Auswahl
      }
      score += timeframeScore;
      
      // Lernziel-Match (höchste Gewichtung)
      if (wizardSelections.goal && program.goals.includes(wizardSelections.goal)) {
        score += 10;
        const goalNames = {
          'strategy': 'Strategisches Management', 
          'leadership': 'Führungskompetenzen', 
          'finance': 'Financial Management', 
          'ai': 'KI & Digitalisierung', 
          'marketing': 'Marketing & Sales', 
          'comprehensive': 'Ganzheitliches Management'
        };
        reasons.push(`Deckt Ihr Lernziel "${goalNames[wizardSelections.goal]}" ab`);
      } else if (!wizardSelections.goal) {
        score += 5; // Neutral wenn keine Auswahl
      }
      
      // Sprachbonus (nicht mehr als harter Filter)
      if (wizardSelections.language && wizardSelections.language !== 'both') {
        if (program.language.includes(wizardSelections.language)) {
          score += 3;
          const langName = wizardSelections.language === 'de' ? 'Deutsch' : 'Englisch';
          reasons.push(`Verfügbar in ${langName}`);
        } else {
          score += 1; // Minimaler Punktabzug, aber nicht ausschließen
          reasons.push('Übersetzung verfügbar');
        }
      } else {
        score += 2; // Bonus für Flexibilität
      }
      
      // Zertifizierungsbonus
      if (wizardSelections.certification) {
        score += 3;
        const certNames = {
          'none': 'Keine Zertifizierung erforderlich', 
          'ects': 'ECTS-Punkte oder höher verfügbar', 
          'cas': 'CAS-Abschluss oder höher verfügbar', 
          'mba': 'MBA-Abschluss verfügbar'
        };
        reasons.push(certNames[wizardSelections.certification]);
      }
      
      // Basis-Score für alle Programme
      score += 1;
      
      programsWithScores.push({...program, score: score, matchReason: reasons.join(', ')});
    }
    
    // Nach Score sortieren (höchster zuerst)
    programsWithScores.sort((a, b) => b.score - a.score);
    
    // Fallback: Wenn keine Programme gefunden, alle Programme anzeigen (sollte nicht passieren)
    if (programsWithScores.length === 0) {
      return Object.values(programs).map(program => ({
        ...program, 
        score: 1, 
        matchReason: 'Allgemeine Empfehlung'
      })).slice(0, 3);
    }
    
    // Maximal 5 Programme zurückgeben
    return programsWithScores.slice(0, 5);
  }

  function wizardRestartWizard() {
    currentWizardStep = 1;
    wizardSelections = {goal: null, timeframe: null, language: null, certification: null};
    document.querySelectorAll('.wizard-step').forEach(step => step.classList.remove('active'));
    document.getElementById('wizard-step-1').classList.add('active');
    document.querySelectorAll('.progress-step').forEach((step, index) => {
      step.classList.remove('active', 'completed');
      if (index === 0) step.classList.add('active');
    });
    document.querySelectorAll('.progress-connector').forEach(connector => {
      connector.classList.remove('active', 'completed');
    });
    document.querySelectorAll('.option-card').forEach(card => card.classList.remove('selected'));
    // Buttons bleiben immer aktiviert
  }

  // Event handlers
  document.addEventListener('DOMContentLoaded', function() {
    const optionCards = document.querySelectorAll('.option-card');
    optionCards.forEach(card => {
      card.addEventListener('click', function() {
        handleWizardOptionSelection(this);
      });
    });
    
    document.addEventListener('keydown', function(event) {
        if (event.key === 'Escape') {
            history.back();
        }
    });

    if (!document.querySelector('.wizard-step.active')) {
        document.getElementById('wizard-step-1').classList.add('active');
        document.getElementById('wizard-step-indicator-1').classList.add('active');
    }
  });

  function handleWizardOptionSelection(card) {
    const step = currentWizardStep;
    const value = card.dataset.value;
    const type = card.dataset.type;

    if (step === 1) {
      // Toggle selection - wenn bereits ausgewählt, dann entfernen
      if (card.classList.contains('selected')) {
        card.classList.remove('selected');
        wizardSelections.goal = null;
      } else {
        document.querySelectorAll('#wizard-step-1 .option-card').forEach(c => c.classList.remove('selected'));
        card.classList.add('selected');
        wizardSelections.goal = value;
      }
    } else if (step === 2) {
      // Toggle selection - wenn bereits ausgewählt, dann entfernen
      if (card.classList.contains('selected')) {
        card.classList.remove('selected');
        wizardSelections.timeframe = null;
      } else {
        document.querySelectorAll('#wizard-step-2 .option-card').forEach(c => c.classList.remove('selected'));
        card.classList.add('selected');
        wizardSelections.timeframe = value;
      }
    } else if (step === 3) {
      if (type === 'language') {
        // Toggle selection - wenn bereits ausgewählt, dann entfernen
        if (card.classList.contains('selected')) {
          card.classList.remove('selected');
          wizardSelections.language = null;
        } else {
          document.querySelectorAll('#wizard-step-3 [data-type="language"]').forEach(c => c.classList.remove('selected'));
          card.classList.add('selected');
          wizardSelections.language = value;
        }
      } else if (type === 'certification') {
        // Toggle selection - wenn bereits ausgewählt, dann entfernen
        if (card.classList.contains('selected')) {
          card.classList.remove('selected');
          wizardSelections.certification = null;
        } else {
          document.querySelectorAll('#wizard-step-3 [data-type="certification"]').forEach(c => c.classList.remove('selected'));
          card.classList.add('selected');
          wizardSelections.certification = value;
        }
      }
    }
  }
</script>
</body>
</html>